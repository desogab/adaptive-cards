{
  "branchName": "@{replace(triggerBody()?['ref'], 'refs/heads/', '')}",
  "commitCountText": "@{if(equals(triggerBody()?['total_commits_count'], 1), '1 commit', concat(string(triggerBody()?['total_commits_count']), ' commits'))}",
  "protectionStatus": "@{if(triggerBody()?['ref_protected'], '🔒 Protected', '🔓 Unprotected')}",
  "eventIcon": "@{if(equals(triggerBody()?['object_kind'], 'push'), '🚀', if(equals(triggerBody()?['object_kind'], 'merge_request'), '🔀', '📝'))}",
  "userDisplayName": "@{concat(triggerBody()?['user_name'], ' (@', triggerBody()?['user_username'], ')')}",
  "formattedTimestamp": "@{formatDateTime(first(triggerBody()?['commits'])?['timestamp'], 'dd/MM/yyyy HH:mm')}",
  "shortCommitMessage": "@{if(greater(length(first(triggerBody()?['commits'])?['message']), 150), concat(substring(first(triggerBody()?['commits'])?['message'], 0, 147), '...'), first(triggerBody()?['commits'])?['message'])}",
  "branchCommitsUrl": "@{concat(triggerBody()?['project']?['web_url'], '/-/commits/', replace(triggerBody()?['ref'], 'refs/heads/', ''))}",
  "currentDateTime": "@{formatDateTime(utcNow(), 'yyyy-MM-dd HH:mm:ss')} UTC",
  "processedBy": "desogab",
  "projectFullPath": "@{triggerBody()?['project']?['path_with_namespace']}",
  "commitId": "@{substring(first(triggerBody()?['commits'])?['id'], 0, 8)}",
  "commitAuthor": "@{first(triggerBody()?['commits'])?['author']?['name']}",
  "commitTitle": "@{first(triggerBody()?['commits'])?['title']}",
  "projectName": "@{triggerBody()?['project']?['name']}",
  "projectUrl": "@{triggerBody()?['project']?['web_url']}",
  "userEmail": "@{triggerBody()?['user_email']}",
  "userAvatar": "@{triggerBody()?['user_avatar']}",
  "projectId": "@{triggerBody()?['project_id']}",
  "filesAdded": "@{length(first(triggerBody()?['commits'])?['added'])}",
  "filesModified": "@{length(first(triggerBody()?['commits'])?['modified'])}",
  "filesRemoved": "@{length(first(triggerBody()?['commits'])?['removed'])}",
  "commitUrl": "@{first(triggerBody()?['commits'])?['url']}",
  "totalChanges": "@{add(add(length(first(triggerBody()?['commits'])?['added']), length(first(triggerBody()?['commits'])?['modified'])), length(first(triggerBody()?['commits'])?['removed']))}",
  "eventSummary": "@{concat(triggerBody()?['user_name'], ' pushed ', string(triggerBody()?['total_commits_count']), ' commits to ', replace(triggerBody()?['ref'], 'refs/heads/', ''), ' branch')}"
}
